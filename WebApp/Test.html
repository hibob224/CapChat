<!DOCTYPE HTML>
<html>
	<head>
		<title>CaptChat</title>
		<script type="text/javascript" src=http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js></script>
		<script type="text/javascript" src='scripts/Font.js'></script>
		<script type="text/javascript">
		  	$(document).ready(function() {
		  		//Preloads font
		    	var font = new Font();
		    	font.src = "Fonts/moms.ttf";
		    	font.fontFamily = "MomsTypewriter";
		    	//Displays 'First' Captcha once font is ready
		    	font.onload = function () {
		    		$('#refresh_captcha').click();
		    	}
		  	});

		  	function runScript(e) {
		  		if (e.keyCode == 13) {
		  			captchaIfy($('#input').val());
		  		}
		  	}

		 	function captchaIfy(input) {
				input = input || $('#input').val();
		    	// Getting canvas variable 
		    	var tCtx = document.getElementById('textCanvas').getContext('2d'),
		    	imageElem = document.getElementById('image');

		    	tCtx.font= "normal 24px MomsTypewriter";  //set text fonts option for  canvas,html5 canvas: Text Option
		   		tCtx.strokeStyle = "#000000";    //html5 canvas: Text Option
		    
		    	tCtx.clearRect(0,0,100,40);        //Clear previous Canvas for redraw our captcha
			    tCtx.strokeText(input,30,20,70);  //Stroke random string to canvas
		 
		    	tCtx.textBaseline = "middle";                  //html5 canvas: Text Option,line in middle of text

		    	imageElem.src = tCtx.canvas.toDataURL(); // provide canvas url to image src
		 
				// console.log(imageElem.src);  //image 
			}
		</script>
	</head>

	<body>
		<div>
		  	<canvas id='textCanvas' width=100 height=40></canvas>
		  	<img id='image'>
		  	<br>
		  	<input id="input" type=text onkeypress="runScript(event)">
		  	<img id="refresh_captcha" src="refresh.png" onClick="captchaIfy('First');"/>
		</div>
	</body>
</html>






